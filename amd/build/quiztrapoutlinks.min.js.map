{"version":3,"sources":["../src/quiztrapoutlinks.js"],"names":["define","$","str","log","outmessage","f","skipf","e","localTarget","id","window","onbeforeunload","originTarget","target","init","get_string","done","s","onsubmit","debug"],"mappings":"AAOAA,OAAM,yCAAC,CAAC,QAAD,CAAW,UAAX,CAAuB,UAAvB,CAAD,CAAqC,SAASC,CAAT,CAAYC,CAAZ,CAAiBC,CAAjB,CAAsB,IAEzDC,CAAAA,CAAU,CAAG,qEAF4C,CAIzDC,CAAC,CAAG,UAAW,CACf,MAAOD,CAAAA,CAAU,IACpB,CAN4D,CAQzDE,CAAK,CAAG,SAASC,CAAT,CAAY,CACpB,GAAIA,CAAC,CAACC,WAAN,CAAmB,CACf,GAAwB,cAApB,EAAAD,CAAC,CAACC,WAAF,CAAcC,EAAlB,CAAwC,CAEpCC,MAAM,CAACC,cAAP,CAAwB,IAC3B,CACJ,CALD,IAKO,IAAIJ,CAAC,CAACK,YAAN,CAAoB,CACvB,GAAyB,cAArB,EAAAL,CAAC,CAACK,YAAF,CAAeH,EAAnB,CAAyC,CAErCC,MAAM,CAACC,cAAP,CAAwB,IAC3B,CACJ,CALM,IAKA,IAAIJ,CAAC,CAACM,MAAN,CAAc,CACjB,GAAmB,cAAf,EAAAN,CAAC,CAACM,MAAF,CAASJ,EAAb,CAAmC,CAE/BC,MAAM,CAACC,cAAP,CAAwB,IAC3B,CACJ,CACD,MAAO,KACV,CA1B4D,CA4B7D,MAAO,CACHG,IAAI,CAAE,eAAW,CAEbZ,CAAG,CAACa,UAAJ,CAAe,oBAAf,CAAqC,sBAArC,EAA6DC,IAA7D,CAAkE,SAASC,CAAT,CAAY,CAC1Eb,CAAU,CAAGa,CAChB,CAFD,EAGAP,MAAM,CAACC,cAAP,CAAwBN,CAAxB,CACAK,MAAM,CAACQ,QAAP,CAAkBZ,CAAlB,CAEAH,CAAG,CAACgB,KAAJ,CAAU,uDAAV,CACH,CAVE,CAaV,CAzCK,CAAN","sourcesContent":["/**\n * This will only work for quizzes having :\n * - being customscripted as required\n * - having single question per page\n */\n// jshint undef:false, unused:false\n\ndefine(['jquery', 'core/str', 'core/log'], function($, str, log) {\n\n    var outmessage = \"You will loose all results of the attempt. Do you want to continue?\";\n\n    var f = function() {\n        return outmessage || true;\n    };\n\n    var skipf = function(e) {\n        if (e.localTarget) {\n            if (e.localTarget.id == 'responseform') {\n                // Trap only the quiz answer form, let trigger all other forms.\n                window.onbeforeunload = null;\n            }\n        } else if (e.originTarget) {\n            if (e.originTarget.id == 'responseform') {\n                // Trap only the quiz answer form, let trigger all other forms.\n                window.onbeforeunload = null;\n            }\n        } else if (e.target) {\n            if (e.target.id == 'responseform') {\n                // Trap only the quiz answer form, let trigger all other forms.\n                window.onbeforeunload = null;\n            }\n        }\n        return null;\n    };\n\n    return {\n        init: function() {\n\n            str.get_string('looseattemptsignal', 'block_quiz_behaviour').done(function(s) {\n                outmessage = s;\n            });\n            window.onbeforeunload = f;\n            window.onsubmit = skipf;\n\n            log.debug('AMD Block_quiz_behaviour quiztrapoutlinks initialized');\n        }\n    };\n\n});"],"file":"quiztrapoutlinks.min.js"}