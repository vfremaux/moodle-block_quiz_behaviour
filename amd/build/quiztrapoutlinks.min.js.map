{"version":3,"file":"quiztrapoutlinks.min.js","sources":["../src/quiztrapoutlinks.js"],"sourcesContent":["/**\n * This will only work for quizzes having :\n * - being customscripted as required\n * - having single question per page\n */\n// jshint undef:false, unused:false\n\ndefine(['jquery', 'core/str', 'core/log'], function($, str, log) {\n\n    var outmessage = \"You will loose all results of the attempt. Do you want to continue?\";\n\n    var f = function() {\n        return outmessage || true;\n    };\n\n    var skipf = function(e) {\n        if (e.localTarget) {\n            if (e.localTarget.id == 'responseform') {\n                // Trap only the quiz answer form, let trigger all other forms.\n                window.onbeforeunload = null;\n            }\n        } else if (e.originTarget) {\n            if (e.originTarget.id == 'responseform') {\n                // Trap only the quiz answer form, let trigger all other forms.\n                window.onbeforeunload = null;\n            }\n        } else if (e.target) {\n            if (e.target.id == 'responseform') {\n                // Trap only the quiz answer form, let trigger all other forms.\n                window.onbeforeunload = null;\n            }\n        }\n        return null;\n    };\n\n    return {\n        init: function() {\n\n            str.get_string('looseattemptsignal', 'block_quiz_behaviour').done(function(s) {\n                outmessage = s;\n            });\n            window.onbeforeunload = f;\n            window.onsubmit = skipf;\n\n            log.debug('AMD Block_quiz_behaviour quiztrapoutlinks initialized');\n        }\n    };\n\n});"],"names":["define","$","str","log","outmessage","f","skipf","e","localTarget","id","window","onbeforeunload","originTarget","target","init","get_string","done","s","onsubmit","debug"],"mappings":"AAOAA,+CAAO,CAAC,SAAU,WAAY,aAAa,SAASC,EAAGC,IAAKC,SAEpDC,WAAa,sEAEbC,EAAI,kBACGD,aAAc,GAGrBE,MAAQ,SAASC,UACbA,EAAEC,YACsB,gBAApBD,EAAEC,YAAYC,KAEdC,OAAOC,eAAiB,MAErBJ,EAAEK,aACgB,gBAArBL,EAAEK,aAAaH,KAEfC,OAAOC,eAAiB,MAErBJ,EAAEM,QACU,gBAAfN,EAAEM,OAAOJ,KAETC,OAAOC,eAAiB,MAGzB,YAGJ,CACHG,KAAM,WAEFZ,IAAIa,WAAW,qBAAsB,wBAAwBC,MAAK,SAASC,GACvEb,WAAaa,KAEjBP,OAAOC,eAAiBN,EACxBK,OAAOQ,SAAWZ,MAElBH,IAAIgB,MAAM,0DAIrB"}